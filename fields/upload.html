                                                                                                                                                                                        <!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Upload &raquo; BoltForms</title>

        <link rel="stylesheet" href="https://bolt.github.io/boltforms/css/main.css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,600,700" rel="stylesheet">
        <script defer src="https://use.fontawesome.com/releases/v5.0.3/js/all.js"></script>
    </head>
    <body>

        <div class="docs columns is-gapless is-desktop">
            <aside class="docs__sidebar">
                <div class="docs__sidebar--brand">
                    <div class="brand">
                        <a class="brand--text" href="https://bolt.github.io/boltforms/">
                            BoltForms
                        </a>
                    </div>
                    <button class="button button-bars is-primary is-hidden-desktop">
                        <span class="icon">
                        <i class="fa fa-bars"></i>
                        </span>
                    </button>
                    <button class="button button-search is-primary is-hidden-desktop">
                        <span class="icon">
                        <i class="fa fa-search"></i>
                        </span>
                    </button>
                </div>

                                                <div class="docs__sidebar--search">
                    <form action="https://bolt.github.io/boltforms/search.html" class="control has-icons-right">
                        <input class="input" type="text" name="q" id="tipue_search_input" pattern=".{3,}" title="At least 3 characters" placeholder="Searchâ€¦" required>
                        <span class="icon is-small is-right">
                            <i class="icon-search"></i>
                        </span>
                    </form>
                </div>
                
                                <div class="docs__sidebar--menu">
                    <nav id="sidebar" class="menu" role="navigation">
                        <ul class="menu-list">
                                                                                                                            <li class="">
                                    <a href="https://bolt.github.io/boltforms/getting-started.html" class="">
                                        Getting Started
                                    </a>
                                </li>
                                                                                                                            <li class="">
                                    <a href="https://bolt.github.io/boltforms/fields.html" class="">
                                        Fields
                                    </a>
                                </li>
                                                                                                                            <li class="sub">
                                    <a href="https://bolt.github.io/boltforms/fields/text.html" class="">
                                        Basic Fields
                                    </a>
                                </li>
                                                                                                                            <li class="sub">
                                    <a href="https://bolt.github.io/boltforms/fields/choice.html" class="">
                                        Choice
                                    </a>
                                </li>
                                                                                                                            <li class="sub">
                                    <a href="https://bolt.github.io/boltforms/fields/upload.html" class="is-active">
                                        Upload
                                    </a>
                                </li>
                                                                                                                            <li class="">
                                    <a href="https://bolt.github.io/boltforms/meta-data.html" class="">
                                        Meta data
                                    </a>
                                </li>
                                                                                                                            <li class="">
                                    <a href="https://bolt.github.io/boltforms/templates.html" class="">
                                        Templates
                                    </a>
                                </li>
                                                                                                                            <li class="">
                                    <a href="https://bolt.github.io/boltforms/email.html" class="">
                                        Email Notifications
                                    </a>
                                </li>
                                                                                                                            <li class="">
                                    <a href="https://bolt.github.io/boltforms/submission.html" class="">
                                        Submission & Redirection
                                    </a>
                                </li>
                                                                                                                            <li class="">
                                    <a href="https://bolt.github.io/boltforms/saving-to-contenttype-database.html" class="">
                                        Saving to ContentType or Database
                                    </a>
                                </li>
                                                                                                                            <li class="">
                                    <a href="https://bolt.github.io/boltforms/events.html" class="">
                                        Events
                                    </a>
                                </li>
                                                                                                                            <li class="">
                                    <a href="https://bolt.github.io/boltforms/recaptcha.html" class="">
                                        Recaptcha
                                    </a>
                                </li>
                                                                                                                            <li class="">
                                    <a href="https://bolt.github.io/boltforms/upgrading.html" class="">
                                        Upgrading
                                    </a>
                                </li>
                                                    </ul>
                    </nav>
                </div>
                
                <div class="docs__sidebar--footer is-hidden-touch">
                    <p class="text-muted">
                        Generated with ease by: <br>
                        <a href="http://couscous.io" title="Markdown website generator">Couscous</a> |
                        <a href="https://github.com/bolt/Extension-docs-template" title="Bolt extension documentation template">Bolt template</a>.
                    </p>
                </div>
            </aside>
            <main class="docs__main">
                <header class="docs__main--header">
                    <div class="pagetitle">
                        Upload
                    </div>

                                            <a href="https://github.com/bolt/boltforms" class="button is-info is-hidden-touch" aria-label="This extension on GitHub">
                            <span class="icon is-small">
                                <i class="fas fa-home"></i>
                            </span>
                            <span>GitHub</span>
                        </a>
                        <a href="https://github.com/bolt/boltforms/fork" class="button is-info is-hidden-touch" aria-label="Fork bolt/boltforms on GitHub">
                            <span class="icon is-small">
                                <i class="fas fa-code-branch"></i>
                            </span>
                            <span>Fork</span>
                        </a>
                                                <a href="https://github.com/bolt/boltforms/edit/4.2/docs/fields/upload.md" class="button is-info is-hidden-touch" aria-label="Edit the contents of this page on GitHub">
                            <span class="icon is-small">
                                <i class="fab fa-github"></i>
                            </span>
                            <span>Edit this page</span>
                        </a>
                                                            </header>

                <div class="docs__main--body">
                    <section id="content" class="content">
                        <h1 id="file-uploads">File Uploads</h1>
<p>You can make the visitor upload a file through the form, using the <code>type: file</code> fieldtype.</p>
<p>First, a warning about security:</p>
<h2 id="security">Security</h2>
<p>Handling file uploads is a very common way used to compromise (hack)
a server. BoltForms does a few things to help increase slightly the security of handling
file uploads.</p>
<h3 id="store-the-files-outside-of-the-webroot">Store the files outside of the webroot</h3>
<p>The following are the &quot;global&quot; options that apply to all form uploads:</p>
<pre><code class="language-yaml">    uploads:
        enabled: true                           # The global on/off switch for upload handling
        base_directory: /data/customer-uploads/ # Outside web root, absolute path and writable by the web server's user
        filename_handling: prefix               # Can be either "prefix", "suffix", or "keep"
        management_controller: true             # Enable a controller to handle browsing and downloading of uploaded files</code></pre>
<p>The directory that you specify for <code>base_directory</code> should <strong>NOT</strong> be a route
accessible to the outside world and have to be an <strong>absolute path</strong>. BoltForms provides a special route should you
wish to make the files browsable after upload. This route can be enabled as a
global setting via the <code>management_controller</code> option.</p>
<h3 id="renaming-the-uploaded-files">Renaming the uploaded files</h3>
<p>Secondly, is the <code>filename_handling</code> parameter is an important consideration
for your level of required site security. The reason this setting is important
is, if an attacker knows the uploaded file name then this can make their job a
lot easier. BoltForms provides three uploaded file naming options, <code>prefix</code>,
<code>suffix</code> and <code>keep</code>.</p>
<p>For example, when uploading the file <code>kitten.jpg</code> the settings would provide
something similar to the following table:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Resulting file name</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>prefix</code></td>
<td>kitten.Ze1d352rrI3p.jpg</td>
</tr>
<tr>
<td><code>suffix</code></td>
<td>kitten.jpg.Ze1d352rrI3p</td>
</tr>
<tr>
<td><code>keep</code></td>
<td>kitten.jpg</td>
</tr>
</tbody>
</table>
<p>We recommend <code>suffix</code>, as this is the most secure. Alternatively <code>prefix</code> will
aid in file browsing. However, <code>keep</code> should always be used with caution!</p>
<h2 id="how-to-use-upload">How to use upload</h2>
<p>First, set the global switch for uploads to true in the Boltforms.bolt.yml:</p>
<pre><code class="language-yaml">    uploads:
        enabled: true</code></pre>
<p>Each form has individual options for uploads, such as whether to attach the
uploaded file in the notification message, or whether to place the uploaded file
in a separate subdirectory or the given global upload target.</p>
<p>A very basic, and cut-down, example of a form with an upload field type is given
here:</p>
<pre><code class="language-yaml">file_upload_form:
    notification:
        enabled: true
        attach_files: true             # Optionally send the file as an email attachment
    uploads:
        subdirectory: file_upload_dir  # Optional subdirectory
    fields:
        upload:
            type: file
            options:
                required: false
                label: Picture of your pet that you want us to add to our site
</code></pre>
<h2 id="post-upload-browsing">Post-Upload Browsing</h2>
<p>When <code>management_controller</code> is enabled in the config, a file in the <code>base_directory</code>
location is accessible via <code>http://your-site.com/boltforms/download?file=filename.ext</code>.</p>
<p>These files can be listed via the Twig function <code>boltforms_uploads()</code>, e.g.</p>
<pre><code class="language-twig">    {{ boltforms_uploads() }}</code></pre>
<p>This can be limited to a form's (optionally defined) subdirectory by passing the
form name into <code>boltforms_uploads()</code>, e.g.</p>
<pre><code class="language-twig">    {{ boltforms_uploads('file_upload_form') }}</code></pre>
                    </section>
                </div>
            </main>
        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

        <script>
        var tipuesearch_pages = ["https://bolt.github.io/boltforms/getting-started.html", "https://bolt.github.io/boltforms/fields.html", "https://bolt.github.io/boltforms/fields/text.html", "https://bolt.github.io/boltforms/fields/choice.html", "https://bolt.github.io/boltforms/fields/upload.html", "https://bolt.github.io/boltforms/meta-data.html", "https://bolt.github.io/boltforms/templates.html", "https://bolt.github.io/boltforms/email.html", "https://bolt.github.io/boltforms/submission.html", "https://bolt.github.io/boltforms/saving-to-contenttype-database.html", "https://bolt.github.io/boltforms/events.html", "https://bolt.github.io/boltforms/recaptcha.html", "https://bolt.github.io/boltforms/upgrading.html"];
        </script>
        <script src="https://bolt.github.io/boltforms/tipuesearch/tipuesearch_set.js"></script>
        <script src="https://bolt.github.io/boltforms/tipuesearch/tipuesearch.min.js"></script>
        <script src="https://bolt.github.io/boltforms/js/bundle.js"></script>
        <script>
            $(document).ready(function() {
                $('#tipue_search_input').tipuesearch({
                    'mode': 'live',
                    'liveDescription': '#content',
                    'liveContent': '#content'
                });
            });
        </script>

    </body>
</html>
